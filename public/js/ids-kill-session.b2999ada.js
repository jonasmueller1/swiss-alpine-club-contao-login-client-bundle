/*! For license information please see ids-kill-session.b2999ada.js.LICENSE.txt */
"use strict";window.addEventListener("DOMContentLoaded",(()=>{let t=document.querySelectorAll(".trigger-ids-kill-session[data-href]");for(const o of t)o.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),o.hasAttribute("data-href")&&(o.text=o.dataset.logoutLabel??"du wirst abgemeldet â€¦",o.removeAttribute("data-href"),e("frontend",o.getAttribute("href"),o.dataset.targetpath))}));let o=document.querySelectorAll('#tmenu a[href$="contao/logout"]');for(const t of o)t.addEventListener("click",(o=>{o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),e("backend",t.getAttribute("href"),!1)}));async function e(t,o,e=null){let a=`/_oauth2_login/hitobito/${t}/logout`;"frontend"===t&&null!==e&&(a=`/_oauth2_login/hitobito/frontend/logout?post_logout_redirect_uri=${btoa(e)}`);try{const t=await fetch(a);if(!t.ok){return n(`Could not fetch the hitobito logout url. Server returned status: ${t.status}`)}const e=await t.json();await fetch(o),window.location.href=e.logoutUri}catch(o){n(t,o.message)}}function n(t,o){console.error(o),function(t){window.location.href="frontend"===t?"/_contao/logout":"/contao/logout"}(t)}}));